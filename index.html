<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Tech Discovery Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/lucide@1.4.0/dist/lucide.min.js"></script>
    <style>
        body {
            background-color: #0a0a0a;
            color: #fff;
        }
        .neon-emerald {
            border: 1px solid #00ff88;
            border-radius: 5px;
            padding: 10px;
        }
    </style>
</head>
<body>
    <header class="bg-gray-800 py-4">
        <h1 class="text-3xl text-center neon-emerald">Global Tech Discovery Hub</h1>
    </header>
    <main class="container mx-auto p-4">
        <section class="flex justify-center mb-4">
            <input type="search" id="search" class="w-full p-2 pl-10 text-lg text-gray-700 bg-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600" placeholder="Search repositories...">
            <button id="search-btn" class="ml-2 bg-gray-800 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">Search</button>
        </section>
        <section class="flex flex-wrap justify-center mb-4">
            <button id="cybersecurity" class="neon-emerald mx-2 py-2 px-4">Cybersecurity & Red Team</button>
            <button id="ai-ml" class="neon-emerald mx-2 py-2 px-4">AI & Machine Learning</button>
            <button id="web-backend" class="neon-emerald mx-2 py-2 px-4">Web & Backend Power</button>
            <button id="mobile-dev" class="neon-emerald mx-2 py-2 px-4">Mobile Development</button>
            <button id="general-utilities" class="neon-emerald mx-2 py-2 px-4">General Utilities</button>
        </section>
        <section id="filter-bar" class="flex justify-center mb-4">
            <select id="language" class="mx-2 py-2 px-4">
                <option value="">Language</option>
                <option value="python">Python</option>
                <option value="javascript">JavaScript</option>
                <option value="cpp">C++</option>
                <!-- Add more languages here -->
            </select>
            <select id="total-stars" class="mx-2 py-2 px-4">
                <option value="">Total Stars</option>
                <option value="1000">1000+</option>
                <option value="5000">5000+</option>
                <option value="10000">10000+</option>
                <!-- Add more star options here -->
            </select>
            <select id="last-updated" class="mx-2 py-2 px-4">
                <option value="">Last Updated</option>
                <option value="1d">1 day</option>
                <option value="1w">1 week</option>
                <option value="1m">1 month</option>
                <!-- Add more update options here -->
            </select>
        </section>
        <section id="repo-list" class="flex flex-wrap justify-center">
            <!-- Repository cards will be loaded here -->
        </section>
    </main>
    <script>
        const searchInput = document.getElementById('search');
        const searchBtn = document.getElementById('search-btn');
        const filterBar = document.getElementById('filter-bar');
        const languageSelect = document.getElementById('language');
        const totalStarsSelect = document.getElementById('total-stars');
        const lastUpdatedSelect = document.getElementById('last-updated');
        const repoList = document.getElementById('repo-list');
        const token = '<%= process.env.TOKEN %>'; // Replace with your environment variable
        let currentPage = 1;
        let repositories = [];

        // Add event listeners
        searchBtn.addEventListener('click', searchRepositories);
        languageSelect.addEventListener('change', filterRepositories);
        totalStarsSelect.addEventListener('change', filterRepositories);
        lastUpdatedSelect.addEventListener('change', filterRepositories);

        // Function to search repositories
        async function searchRepositories() {
            const searchQuery = searchInput.value;
            const params = {
                q: searchQuery,
                sort: 'stars',
                order: 'desc',
                per_page: 100,
                page: currentPage
            };
            const headers = {
                Authorization: `Bearer ${token}`
            };
            const response = await fetch(`https://api.github.com/search/repositories`, {
                method: 'GET',
                params,
                headers
            });
            const data = await response.json();
            repositories = repositories.concat(data.items);
            renderRepositories();
            currentPage++;
        }

        // Function to filter repositories
        function filterRepositories() {
            const language = languageSelect.value;
            const totalStars = totalStarsSelect.value;
            const lastUpdated = lastUpdatedSelect.value;
            const filteredRepositories = repositories.filter(repo => {
                if (language && repo.language !== language) return false;
                if (totalStars && repo.stargazers_count < parseInt(totalStars)) return false;
                if (lastUpdated && repo.updated_at < lastUpdated) return false;
                return true;
            });
            renderRepositories(filteredRepositories);
        }

        // Function to render repositories
        function renderRepositories(repos = repositories) {
            repoList.innerHTML = '';
            repos.forEach(repo => {
                const card = document.createElement('div');
                card.classList.add('neon-emerald', 'mx-2', 'my-2', 'p-4', 'w-full', 'md:w-1/2', 'lg:w-1/3');
                card.innerHTML = `
                    <h2 class="text-2xl">${repo.name}</h2>
                    <p>${repo.description}</p>
                    <p>Language: ${repo.language}</p>
                    <p>Stars: ${repo.stargazers_count}</p>
                    <p>Updated: ${repo.updated_at}</p>
                    <button class="neon-emerald py-2 px-4" onclick="viewSource(${repo.id})">View Source</button>
                    <button class="neon-emerald py-2 px-4" onclick="downloadZip(${repo.id})">Download ZIP</button>
                    <button class="neon-emerald py-2 px-4" onclick="copyGitClone(${repo.id})">Copy Git Clone</button>
                    ${repo.hasApk ? `<button class="neon-emerald py-2 px-4" onclick="downloadApk(${repo.id})">Download Android App</button>` : ''}
                `;
                repoList.appendChild(card);
            });
        }

        // Function to view source
        function viewSource(id) {
            window.open(`https://github.com/${id}`, '_blank');
        }

        // Function to download ZIP
        function downloadZip(id) {
            window.open(`https://github.com/${id}/archive/refs/heads/main.zip`, '_blank');
        }

        // Function to copy Git Clone
        function copyGitClone(id) {
            navigator.clipboard.writeText(`git clone https://github.com/${id}.git`);
            alert('Git clone command copied to clipboard!');
        }

        // Function to download APK
        function downloadApk(id) {
            // Implement APK download logic here
        }

        // Infinite scrolling
        window.addEventListener('scroll', () => {
            if (window.scrollY + window.innerHeight >= document.body.offsetHeight) {
                searchRepositories();
            }
        });
    </script>
</body>
</html>