<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الأدوات</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" rel="stylesheet">
</head>
<body class="flex flex-col items-center justify-center h-screen bg-gray-100">
    <div class="welcome-overlay fixed top-0 left-0 w-full h-full bg-gray-800 opacity-100 flex flex-col items-center justify-center text-white" id="welcome-overlay">
        <h1 class="text-5xl font-bold mb-4">مكتبة الأدوات</h1>
        <p class="text-2xl mb-8">ابحث عن الأدوات المهمة</p>
    </div>
    <div class="container mx-auto p-4 pt-6 md:p-6 lg:p-12 xl:p-24">
        <div class="flex flex-wrap justify-center mb-4">
            <button class="cat-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded ml-2 mb-2">الشبكات</button>
            <button class="cat-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded ml-2 mb-2">أنظمة حماية</button>
            <button class="cat-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded ml-2 mb-2">الهندسة العكسية</button>
            <button class="cat-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded ml-2 mb-2">الذكاء الاصطناعي</button>
            <button class="cat-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded ml-2 mb-2">أدوات عالمية</button>
            <button class="cat-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded ml-2 mb-2">مكتبات</button>
            <button class="cat-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded ml-2 mb-2">Cloud أدوات</button>
            <button class="cat-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded ml-2 mb-2">برامج ويندوز</button>
            <button class="cat-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded ml-2 mb-2">اختراق المواقع</button>
        </div>
        <div class="flex justify-center mb-4">
            <input id="mainSearchInput" type="text" class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" placeholder="ابحث عن أداة">
        </div>
        <div id="catGroup" class="results-area mb-4" id="resultsBox"></div>
    </div>
    <script>
        // إخفاء الترحيب
        window.onload = () => {
            setTimeout(() => {
                document.getElementById('welcome-overlay').style.opacity = '0';
                setTimeout(() => document.getElementById('welcome-overlay').remove(), 500);
            }, 2000);
            search('hacking'); // جلب بيانات أولية
        };

        const API = "https://api.github.com/search/repositories?q=";

        async function search(query) {
            const box = document.getElementById('resultsBox');
            box.innerHTML = '<p style="text-align:center; width:100%;">جاري استخراج البيانات...</p>';

            try {
                const res = await fetch(`${API}${encodeURIComponent(query)}&per_page=100`);
                const data = await res.json();
                box.innerHTML = "";

                data.items.forEach(repo => {
                    const zip = `${repo.html_url}/archive/refs/heads/${repo.default_branch}.zip`;
                    box.innerHTML += 
                        `<div class="tool-card bg-white rounded shadow-md p-4 mb-4">
                            <h3>${repo.name}</h3>
                            <p>${repo.description ? repo.description.substring(0, 90) + '...' : 'أداة احترافية من النظام العالمي.'}</p>
                            <div class="card-actions">
                                <span class="lang-label">${repo.language || 'Global'}</span>
                                <a href="${zip}" class="dl-zip text-blue-600 hover:text-blue-800">تحميل ZIP <i class="fas fa-download"></i></a>
                            </div>
                        </div>`
                    ;
                });
            } catch (e) {
                box.innerHTML = "<p>تعذر جلب البيانات. حاول مرة أخرى.</p>";
            }
        }

        // ربط البحث
        document.getElementById('mainSearchInput').onkeypress = (e) => {
            if(e.key === 'Enter') search(e.target.value);
        };

        // ربط الأزرار
        document.getElementById('catGroup').onclick = (e) => {
            if(e.target.classList.contains('cat-btn')) search(e.target.innerText + " hacking");
        };
    </script>
</body>
</html>