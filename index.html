<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø±Ùƒ Ø¨Ø­Ø« Ø£Ø¯ÙˆØ§Øª</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <style>
        .repo-card {
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .repo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .repo-title {
            font-size: 18px;
            font-weight: bold;
        }
        .repo-stars {
            font-size: 16px;
            color: #ffd700;
        }
        .repo-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .lang-badge {
            background-color: #f0f0f0;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 14px;
        }
        .repo-desc {
            margin-bottom: 20px;
        }
        .actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .btn-action {
            margin-right: 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        .btn-git {
            background-color: #333;
            color: #fff;
        }
        .btn-zip {
            background-color: #4CAF50;
            color: #fff;
        }
        .btn-view {
            background-color: #03A9F4;
            color: #fff;
        }
    </style>
</head>
<body>
    <header class="bg-gray-900 text-white p-4 text-center">
        <h1 class="text-3xl font-bold">Ù…Ø­Ø±Ùƒ Ø¨Ø­Ø« Ø£Ø¯ÙˆØ§Øª</h1>
    </header>
    <main class="container mx-auto p-4 mt-4">
        <input type="search" id="search-input" class="w-full p-4 pl-10 text-sm text-gray-700" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ø¯ÙˆØ§Øª...">
        <button id="search-button" class="bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded">Ø¨Ø­Ø«</button>
        <div id="statusText" class="text-gray-600 text-center mt-4"></div>
        <div id="results" class="mt-4"></div>
    </main>
    <script>
        // Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø¬Ù„Ø¨
        async function fetchFromGithub(query) {
            const container = document.getElementById('results');
            const status = document.getElementById('statusText');
            
            container.innerHTML = '<div class="loading"><i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø³Ø­Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª...</div>';
            
            try {
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… API GitHub Ø§Ù„Ø¹Ø§Ù…
                // sort=stars: Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ù‡Ø±Ø© ÙˆÙ…ÙˆØ«ÙˆÙ‚ÙŠØ©
                const url = `https://api.github.com/search/repositories?q=${query}&sort=stars&order=desc&per_page=40`;
                
                const response = await fetch(url);
                
                // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ (Ù…Ø«Ù„ Ø§Ù„Ø­Ø¸Ø± Ø§Ù„Ù…Ø¤Ù‚Øª)
                if (response.status === 403) {
                    throw new Error("âš ï¸ ØªÙ… ØªØ¬Ø§ÙˆØ² Ø­Ø¯ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡ Ù„Ù„ÙŠÙˆÙ…. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… VPN.");
                }
                if (!response.ok) {
                    throw new Error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±.");
                }

                const data = await response.json();
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
                status.innerText = `ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${data.total_count} Ø£Ø¯Ø§Ø© (ÙŠØªÙ… Ø¹Ø±Ø¶ Ø£ÙØ¶Ù„ 40)`;
                container.innerHTML = ""; // Ù…Ø³Ø­ Ø§Ù„ØªØ­Ù…ÙŠÙ„

                if (data.items.length === 0) {
                    container.innerHTML = "<p style='text-align:center'>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£Ø¯ÙˆØ§Øª Ù…Ø·Ø§Ø¨Ù‚Ø©.</p>";
                    return;
                }

                // Ø±Ø³Ù… Ø§Ù„ÙƒØ±ÙˆØª
                data.items.forEach(repo => {
                    createCard(repo, container);
                });

            } catch (error) {
                container.innerHTML = `<div style="text-align:center; color:red; width:100%">
                    <h3>ğŸš« ØªÙˆÙ‚Ù Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                    <p>${error.message}</p>
                </div>`;
            }
        }

        function createCard(repo, container) {
            // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const desc = repo.description ? repo.description.slice(0, 100) + '...' : 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ Ù…ØªØ§Ø­';
            const lang = repo.language || 'Code';
            const size = (repo.size / 1024).toFixed(1) + ' MB';
            const date = new Date(repo.updated_at).toLocaleDateString();

            // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø£ÙˆØ§Ù…Ø±
            const cloneCmd = `git clone ${repo.html_url}`;
            const zipUrl = `${repo.html_url}/archive/refs/heads/master.zip`;

            const cardHTML = 
                `<div class="repo-card">
                    <div class="repo-header">
                        <span class="repo-title">${repo.name}</span>
                        <span class="repo-stars">â­ ${(repo.stargazers_count/1000).toFixed(1)}k</span>
                    </div>
                    
                    <div class="repo-meta">
                        <span class="lang-badge">${lang}</span>
                        <span>ğŸ“… ${date}</span>
                    </div>

                    <p class="repo-desc">${desc}</p>

                    <div class="actions">
                        <button class="btn-action btn-git" onclick="copyText('${cloneCmd}')">
                            <i class="fas fa-copy"></i> Ù†Ø³Ø® Ø§Ù„ØªØ«Ø¨ÙŠØª
                        </button>
                        <a href="${zipUrl}" class="btn-action btn-zip">
                            <i class="fas fa-download"></i> ØªØ­Ù…ÙŠÙ„
                        </a>
                        <a href="${repo.html_url}" target="_blank" class="btn-action btn-view">
                            Ø¹Ø±Ø¶ Ø§Ù„Ù…ØµØ¯Ø± Ø¹Ù„Ù‰ GitHub <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>`
            ;
            
            container.insertAdjacentHTML('beforeend', cardHTML);
        }

        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø£Ù…Ø± Ø¨Ù†Ø¬Ø§Ø­");
            });
        }

        document.getElementById('search-button').addEventListener('click', () => {
            const query = document.getElementById('search-input').value.trim();
            if (query) {
                fetchFromGithub(query);
            }
        });
    </script>
</body>
</html>