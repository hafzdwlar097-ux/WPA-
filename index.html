<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Programming Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lucide@0.5.14/dist/lucide.min.js"></script>
</head>
<body class="bg-gray-900 h-screen overflow-y-scroll">
    <nav class="fixed top-0 left-0 right-0 bg-gray-800 shadow-md p-4 flex justify-between items-center">
        <h1 class="text-2xl text-white font-bold">Real-Time Programming Hub</h1>
        <div class="flex items-center">
            <input type="search" id="search" placeholder="Search repositories, tools, and libraries" class="px-4 py-2 rounded-lg bg-gray-700 text-white focus:outline-none">
            <button id="search-btn" class="ml-2 px-4 py-2 rounded-lg bg-gray-700 text-white hover:bg-gray-600">
                <i class="fas fa-search"></i>
            </button>
        </div>
        <div class="flex items-center">
            <span id="live-status" class="text-green-500">
                <i class="fas fa-circle"></i> Live
            </span>
        </div>
    </nav>
    <main class="mt-16 p-4">
        <section id="pinned" class="mb-8">
            <h2 class="text-xl text-white font-bold mb-2">My Tools</h2>
            <div id="pinned-tools" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Pinned tools will be loaded here -->
            </div>
        </section>
        <section id="search-results" class="mb-8">
            <h2 class="text-xl text-white font-bold mb-2">Search Results</h2>
            <div id="cybersecurity" class="mb-4">
                <h3 class="text-lg text-white font-bold mb-2">Cybersecurity</h3>
                <div id="cybersecurity-tools" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Cybersecurity tools will be loaded here -->
                </div>
            </div>
            <div id="libraries" class="mb-4">
                <h3 class="text-lg text-white font-bold mb-2">Libraries</h3>
                <div id="libraries-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Libraries will be loaded here -->
                </div>
            </div>
            <div id="software-apks" class="mb-4">
                <h3 class="text-lg text-white font-bold mb-2">Software & APKs</h3>
                <div id="software-apks-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Software and APKs will be loaded here -->
                </div>
            </div>
        </section>
    </main>
    <script>
        const githubApiUrl = 'https://api.github.com/search/repositories';
        const searchInput = document.getElementById('search');
        const searchButton = document.getElementById('search-btn');
        const liveStatus = document.getElementById('live-status');
        const pinnedTools = document.getElementById('pinned-tools');
        const cybersecurityTools = document.getElementById('cybersecurity-tools');
        const librariesList = document.getElementById('libraries-list');
        const softwareApksList = document.getElementById('software-apks-list');

        searchButton.addEventListener('click', () => {
            const searchQuery = searchInput.value;
            if (searchQuery.trim() !== '') {
                fetch(`${githubApiUrl}?q=${searchQuery}`)
                    .then(response => response.json())
                    .then(data => {
                        const repositories = data.items;
                        cybersecurityTools.innerHTML = '';
                        librariesList.innerHTML = '';
                        softwareApksList.innerHTML = '';

                        repositories.forEach(repository => {
                            const tags = repository.topics;
                            const releases = repository.releases_url;

                            if (tags.includes('hacking') || tags.includes('security') || tags.includes('tools')) {
                                const cybersecurityTool = document.createElement('div');
                                cybersecurityTool.classList.add('bg-gray-700', 'px-4', 'py-2', 'rounded-lg');
                                cybersecurityTool.innerHTML = `
                                    <h4 class="text-lg text-white font-bold mb-2">${repository.name}</h4>
                                    <button id="view-btn" class="px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-500">
                                        View
                                    </button>
                                    <button id="download-btn" class="ml-2 px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-500">
                                        Download
                                    </button>
                                `;
                                cybersecurityTools.appendChild(cybersecurityTool);
                            } else if (repository.description.includes('library') || repository.description.includes('package')) {
                                const library = document.createElement('div');
                                library.classList.add('bg-gray-700', 'px-4', 'py-2', 'rounded-lg');
                                library.innerHTML = `
                                    <h4 class="text-lg text-white font-bold mb-2">${repository.name}</h4>
                                    <button id="view-btn" class="px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-500">
                                        View
                                    </button>
                                `;
                                librariesList.appendChild(library);
                            } else if (releases.includes('.apk') || releases.includes('.exe')) {
                                const softwareApk = document.createElement('div');
                                softwareApk.classList.add('bg-gray-700', 'px-4', 'py-2', 'rounded-lg');
                                softwareApk.innerHTML = `
                                    <h4 class="text-lg text-white font-bold mb-2">${repository.name}</h4>
                                    <button id="download-btn" class="px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-500">
                                        Download
                                    </button>
                                `;
                                softwareApksList.appendChild(softwareApk);
                            }
                        });

                        // Load pinned tools
                        fetch('https://api.github.com/repos/hafzdwlar097-ux/WPA-/contents')
                            .then(response => response.json())
                            .then(data => {
                                pinnedTools.innerHTML = '';
                                data.forEach(tool => {
                                    const pinnedTool = document.createElement('div');
                                    pinnedTool.classList.add('bg-gray-700', 'px-4', 'py-2', 'rounded-lg');
                                    pinnedTool.innerHTML = `
                                        <h4 class="text-lg text-white font-bold mb-2">${tool.name}</h4>
                                        <button id="view-btn" class="px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-500">
                                            View
                                        </button>
                                        <button id="download-btn" class="ml-2 px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-500">
                                            Download
                                        </button>
                                    `;
                                    pinnedTools.appendChild(pinnedTool);
                                });
                            });
                    });
            }
        });

        // Setup view button event listener
        document.addEventListener('click', event => {
            if (event.target.id === 'view-btn') {
                const repositoryUrl = event.target.parentNode.parentNode.querySelector('h4').textContent;
                window.open(`https://github.com/${repositoryUrl}`, '_blank');
            }
        });

        // Setup download button event listener
        document.addEventListener('click', event => {
            if (event.target.id === 'download-btn') {
                const repositoryUrl = event.target.parentNode.parentNode.querySelector('h4').textContent;
                fetch(`https://api.github.com/repos/${repositoryUrl}/releases`)
                    .then(response => response.json())
                    .then(data => {
                        const latestRelease = data[0];
                        const downloadUrl = latestRelease.assets[0].browser_download_url;
                        window.open(downloadUrl, '_blank');
                    });
            }
        });

        // Check if GitHub API is online
        fetch(githubApiUrl)
            .then(response => {
                if (response.ok) {
                    liveStatus.classList.add('text-green-500');
                    liveStatus.textContent = 'Live';
                } else {
                    liveStatus.classList.add('text-red-500');
                    liveStatus.textContent = 'Offline';
                }
            });
    </script>
</body>
</html>